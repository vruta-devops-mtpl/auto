import{n as v,an as F,r as w,j as s,ap as y,aq as N,ar as b,as as E,B as S,av as $,aw as I}from"./index-cd518a67.js";import{A as P}from"./ActionLink-4f2343f2.js";import{u as k}from"./useTimeOutMessage-2e54961d.js";import{c as A,a as C,F as M,d as B,e as O}from"./index.esm-ae318cd2.js";import"./useThemeClass-a68676b2.js";const T=c=>{const{t:r}=v(),d=F(),h=A().shape({email:C().email(`${r("email.isEmail")}`).required(`${r("email.isNotEmpty")}`)}),{disableSubmit:p=!1,className:u,signInUrl:x="/sign-in"}=c,[o,q]=w.useState(!1),[l,j]=k(),g=async(t,e)=>{var i,m;e(!0);try{const a={email:t.email};(await $(a)).status===201&&(e(!1),d("/reset-password",{state:{email:a.email}}))}catch(a){const n=((m=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:m.status)||500,f=n!==I?`${r(`auth.forgot_password.${n}`)}`:"Something Went Wrong";j(f),e(!1)}};return s.jsxs("div",{className:u,children:[s.jsx("div",{className:"mb-6",children:o?s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mb-1",children:"Check your email"}),s.jsx("p",{children:"We have sent a password recovery instruction to your email"})]}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"mb-1",children:"Forgot Password"}),s.jsx("p",{children:"Please enter your email address to receive a verification code"})]})}),l&&s.jsx(y,{showIcon:!0,className:"mb-4",type:"danger",children:l}),s.jsx(M,{initialValues:{email:""},validationSchema:h,onSubmit:(t,{setSubmitting:e})=>{p?e(!1):g(t,e)},children:({touched:t,errors:e,isSubmitting:i})=>s.jsx(B,{children:s.jsxs(N,{children:[s.jsx("div",{className:o?"hidden":"",children:s.jsx(b,{invalid:e.email&&t.email,errorMessage:e.email,children:s.jsx(O,{type:"email",autoComplete:"off",name:"email",placeholder:"Email address",component:E})})}),s.jsx(S,{block:!0,loading:i,variant:"solid",type:"submit",children:o?"Resend Email":"Confirm"}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx("span",{children:"Back to "}),s.jsx(P,{to:x,children:"Sign in"})]})]})})})]})},W=()=>s.jsx(T,{disableSubmit:!1}),U=W;export{U as default};
